# Example program
# factorial
import "basic.sbl";

fact {
    # peek and compare to zero
    br {
        .x       # pop into x
        x 1 -    # push a copy and subtract 1 from it
        fact     # call factorial
        x *;     # multiply whatever our factorial is by x
    }
    el {
        # pop off to nothing, and push a 1
        .@ 1;
    }
}

square { ^ *; }

test-numbers {
    @;
    1 2 3 4 5;
    loop {
        fact println;
    }

    1 2 3 4 5;
    loop {
        square "value is " print println;
    }
    .@;
}

test-printing {
    @ '\n 'o 'l 'l 'e 'h;
    loop { print; }
    "world!" println;
}

main {
    "testing number functions" println;
    test-numbers;

    "testing printing functions" println;
    test-printing;
}
