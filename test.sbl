# Example program
# factorial

fact {
    # peek and compare to zero
    br {
        . x ;     # pop into x
        1 x - ;   # push a copy and subtract 1 from it
        fact ;    # call factorial
        x * ;     # multiply whatever our factorial is by x
    }
    el {
        # pop off to nothing, and push a 1
        .;
        1;
    }
}

square {
    dup *;
}

dup {
    . x;
    x x;
}

test_numbers {
    0;
    1 2 3 4 5;
    loop {
        fact print;
        '\n print;
    }

    1 2 3 4 5;
    loop {
        square print;
        '\n print;
    }
    .;
}

printa {
    loop { print; }
}

main {
    test_numbers;

    0 '\n 'o 'l 'l 'e 'h printa;
    "world!" println;
    println;
    br {
        "The stack was not clean upon exit!" println;
    }
}
